{"filter":false,"title":"comment_controller.js","tooltip":"/models/comment_controller.js","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":28,"column":2},"action":"insert","lines":["var models = require('../models/models.js');","","// GET /quizes/:quizId/comments/new","exports.new = function(req, res) {","  res.render('comments/new.ejs', {quizid: req.params.quizId, errors: []});","};","","// POST /quizes/:quizId/comments","exports.create = function(req, res) {","  var comment = models.Comment.build(","      { texto: req.body.comment.texto,          ","        QuizId: req.params.quizId","        });","","  comment","  .validate()","  .then(","    function(err){","      if (err) {","        res.render('comments/new.ejs', {comment: comment, errors: err.errors});","      } else {","        comment // save: guarda en DB campo texto de comment","        .save()","        .then( function(){ res.redirect('/quizes/'+req.params.quizId)}) ","      }      // res.redirect: Redirecci√≥n HTTP a lista de preguntas","    }","  ).catch(function(error){next(error)});","  ","};"],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":28,"column":2},"end":{"row":28,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1439313815009,"hash":"a233d97620e4bcedf7748546256a78adef138833"}